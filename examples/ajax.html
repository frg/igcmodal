<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>IGC Modal</title>

    <!-- src imports -->
    <link rel="stylesheet" href="../src/igc-modal.css">
    <script src="../src/igc-modal.js"></script>

    <!-- dist imports -->
    <!--<link rel="stylesheet" href="../dist/igc-modal.min.css">
		<script src="../dist/igc-modal.min.js"></script>-->
</head>

<body>
    <script>
        var modalDemo;

        modalDemo = IgcModal({
            className: "modal-demo",
            content: "<h1>Loading</h1>",
            maxWidth: 600, // 600 = 600px
            minWidth: 280,
            beforeShow: function() {
                console.info("[MODAL] Before Show", this);

                ajaxGet(
                    'http://jsonplaceholder.typicode.com/posts/1',
                    function(request) {
                        this.setContent(JSON.parse(request.response).body);
                    }.bind(this)
                );
            },
            afterShow: function() {
                console.info("[MODAL] After Show", this);
            },
            beforeHide: function() {
                console.info("[MODAL] Before Hide", this);
            },
            afterHide: function() {
                console.info("[MODAL] After Hide", this);
            },
            afterDomInit: function() {
                console.info("[MODAL] After DOM init", this);
            }
        }).show();

        function ajaxGet(url, onSuccess, onError, onComplete) {
            if (!url && typeof url !== 'string') throw new Error('url paramater is invalid string!');

            var request = new XMLHttpRequest();
            request.open('GET', url, true);

            request.onload = function() {
                if (request.status >= 200 && request.status < 400) {
                    // Success!
                    if (typeof onSuccess === 'function') onSuccess.call(this, request);
                } else {
                    // We reached our target server, but it returned an error
                    if (typeof onError === 'function') onError.call(this, request);
                }

                if (typeof onComplete === 'function') onComplete.call(this, request);
            };

            request.onerror = function() {
                // There was a connection error of some sort
                if (typeof onError === 'function') onError.call(this, request);
            };

            request.send();
        }
    </script>
</body>

</html>